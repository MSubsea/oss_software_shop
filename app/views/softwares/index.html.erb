<div class="container mt-5">
  <div class="container-info mt-5 text-white">
    <div class="card m-2">
        <% if policy(Software).new? %>
          <%= link_to "Add new software", new_software_path, class: "p-2 btn btn-primary" %>
        <% end %>
        <div class="input">
          <%= form_tag softwares_path, method: :get do %>
            <%= text_field_tag :query,
              params[:query],
              class: "form-control",
              placeholder: "Search for software"
            %>
        <br>
        <%= submit_tag "Search", class: "btn btn-primary" %>
      <% end %>
      </div>
    </div>
  </div>
  <div class="container-info mt-5 text-white">
    <% @softwares.each do |software| %>
      <div class="card">
        <div class="d-flex">
          <div class="px-2">
            <% if software.photo.key.present? %>
              <%= cl_image_tag software.photo.key, height: 200, width: 200, crop: :fill %>
            <% end %>
          </div>
          <div class="px-2">
            <h1 class="p-2"><%= link_to software.title, software_path(software), class: "btn btn-secondary" %></h1>
            <p class="p-2"><%= software.description %></p>
          </div>
        </div>
        <% if current_user %>
          <% if policy(Release).new? %>
            <%= link_to "Add new release", new_software_release_path(software), class: "p-2 btn btn-secondary"%>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
